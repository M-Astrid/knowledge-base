<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

- [Что такое паттерн **API Gateway**?](#%D1%87%D1%82%D0%BE-%D1%82%D0%B0%D0%BA%D0%BE%D0%B5-%D0%BF%D0%B0%D1%82%D1%82%D0%B5%D1%80%D0%BD-api-gateway)
- [Основная идея](#%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D0%B0%D1%8F-%D0%B8%D0%B4%D0%B5%D1%8F)
- [Основные функции API Gateway](#%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D0%B5-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8-api-gateway)
- [Почему использовать API Gateway?](#%D0%BF%D0%BE%D1%87%D0%B5%D0%BC%D1%83-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D1%8C-api-gateway)
- [Типичные реализации и инструменты](#%D1%82%D0%B8%D0%BF%D0%B8%D1%87%D0%BD%D1%8B%D0%B5-%D1%80%D0%B5%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8-%D0%B8-%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B)
- [Варианты архитектурных решений](#%D0%B2%D0%B0%D1%80%D0%B8%D0%B0%D0%BD%D1%82%D1%8B-%D0%B0%D1%80%D1%85%D0%B8%D1%82%D0%B5%D0%BA%D1%82%D1%83%D1%80%D0%BD%D1%8B%D1%85-%D1%80%D0%B5%D1%88%D0%B5%D0%BD%D0%B8%D0%B9)
- [Итог](#%D0%B8%D1%82%D0%BE%D0%B3)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->



## Что такое паттерн **API Gateway**?

**API Gateway** — это архитектурный паттерн, при котором единая точка входа (шлюз) служит для взаимодействия клиентов с множеством микросервисов или внутренних API. Он оборачивает все внутренние сервисы, предоставляя унифицированный интерфейс, маршрутизацию, безопасность и дополнительные функции.

---

## Основная идея

В распределенной системе, особенно при использовании микросервисной архитектуры, множество сервисов могут иметь разные интерфейсы, протоколы и политики безопасности. API Gateway выступает в роли "фронт-офиса", который:

- Обеспечивает единый вход для клиентов (мобильных приложений, веб-interfaces и др.)
- Маршрутизирует запросы к соответствующим микросервисам
- Выполняет аутентификацию, авторизацию
- Выполняет агрегацию данных из нескольких сервисов
- Реализует кэширование, ограничение скорости (rate limiting), логирование и мониторинг

---

## Основные функции API Gateway

- **Маршрутизация запросов:** перенаправление запросов к нужным микросервисам
- **Аутентификация и авторизация:** проверка прав доступа пользователей
- **Обработка кросс-сервисных задач:** например, кэширование, сжатие, преобразование форматов
- **Агрегация ответов:** сбор данных из нескольких сервисов и формирование единого ответа
- **Обеспечение безопасности:** SSL/TLS, фильтрация, шифрование
- **Мониторинг и логирование:** сбор метрик, логов

---

## Почему использовать API Gateway?

- **Упрощение клиентских приложений:** клиенты взаимодействуют только с одним интерфейсом
- **Инкапсуляция внутренней архитектуры:** скрытие сложности микросервисов
- **Обеспечение безопасности:** централизованный контроль доступа
- **Улучшение масштабируемости и отказоустойчивости**
- **Легкое внедрение изменений:** маршрутизация и обработка на границе системы

---

## Типичные реализации и инструменты

- **NGINX / HAProxy** (используются как прокси или балансировщики)
- **Kong** (Open-source API Gateway, расширяемый через плагины)
- **Tyk** (Коммерческий и open-source API Gateway)
- **Zuul** (от Netflix, Java, но применим и в других сценариях)
- **Express Gateway** (Node.js)
- **AWS API Gateway** (облачное решение от AWS)
- **Kubernetes Ingress Controllers** (часто используют как API Gateway в кластерах)

---

## Варианты архитектурных решений

1. **API Gateway как фронт-енд для всех сервисов** — классическая схема.
2. **API Gateway с микросервисами-адаптерами** — внутри может быть слой преобразования.
3. **Многоуровневое API Gateway** — например, внешний для публичных API и внутренний для межсервисных вызовов.

---

## Итог

**API Gateway** — важный компонент современной микросервисной архитектуры, который обеспечивает унифицированный входной интерфейс, повышая безопасность, управляемость и масштабируемость системы. Он помогает скрывать внутреннюю сложность, оптимизировать взаимодействие и обеспечить лучшие условия для развития системы.

